# P127: Group the elements of a set into disjoint subsets

指定分組數量和尺寸，將列表拆分成不相交的分組。給定列表、分組數量和尺寸，可行解不是唯一的。本題要求羅列出所有可行的拆分方式。

首先，設計測試用例。一個解如果滿足以下三個條件即為可行解：

1. 分組數量和尺寸滿足約束
2. 所有分組都不相交
3. 分組中的所有元素都屬於原列表

但如何判斷其是否羅列了所有可行解呢？
「從一個列表中抽取指定數量元素」是**組合**問題，「將一個列表拆分為多個分組」則是將一系列「從一個列表中抽取指定數量元素」所有可行解進行排列（permutation）。
可能的組合數量公司如下，`n`為候選元素縂數，`r`是參與組合元素數量。

$$
C_r = \frac{n!}{r!(n-r)!}
$$

因為一系列「從一個列表中抽取指定數量元素」都是從前一次抽剩下的元素中抽取的，所以每一次組合的`n`和`r`都不同。假設，初始元素數量`N`，拆分為`I`組不相交的子集，每一子集的元素數量記為$$r_i, 1 <= i <= I$$。 第$$i$$次組合候選元素數量為$$n_i$$，第$$i$$次組合可行解的數量為$$C_i$$。所有分組可行解的數量為$$P$$：

$$
\begin{align*}
n_1 & = N \\
n_i & = N - \sum_{a=1}^{i} r_a \\
C_i & = \frac{n_i!}{r_i!(n_i-r_i)!} \\
P & = \Pi_{i=1}^{I} C_i
\end{align*}
$$

完整的測試用例代碼：

[include](../../../tests/lists/p127_test.py)

上面已解釋了，「指定分組數量和尺寸，將列表拆分成不相交的分組」等於將一系列「從列表中抽取指定數量元素」的可行解進行排列。所以，先使用P126中實現的combination求出每一個分組的可行解集。再對所有解集進行排列。排列需要「集合乘法」，可以用**遞歸**和雙迭代List Comprehension實現。

代碼實現：

[include](../../../python99/lists/p127.py)
